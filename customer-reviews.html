<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>صفحة آراء العملاء</title>
  <style>
    /* تصميم عام */
    :root{
      --primary1:#4CAF50;
      --primary2:#81C784;
      --accent:#66BB6A;
      --card:#eafaf1;
      --muted:#666;
    }
    body{
      font-family: "Segoe UI", Tahoma, Arial, "Noto Kufi Arabic", sans-serif;
      direction: rtl;
      padding: 24px;
      background:#fafafa;
      color:#111;
      line-height:1.5;
    }

    .container{
      max-width:900px;
      margin:0 auto;
    }

    h1{ margin-bottom:12px; }
    .top-actions{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:18px; }

    /* زر اطلب الخدمة */
    .order-now-btn{
      background: linear-gradient(135deg,var(--primary1),var(--primary2));
      color:#fff;
      border:none;
      padding:12px 20px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 6px 12px rgba(0,0,0,0.08);
    }
    .order-now-btn:active{ transform:translateY(1px); }

    /* زر آراء العملاء */
    .fun-feedback-btn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      background:linear-gradient(135deg,var(--primary2),var(--accent));
      color:#fff;
      font-size:15px;
      font-weight:700;
      padding:12px 18px;
      border-radius:50px;
      text-decoration:none;
      transition:all .25s ease;
      box-shadow:0 6px 12px rgba(0,0,0,0.08);
    }
    .fun-feedback-btn:hover{ transform:scale(1.04) rotate(-1deg); }

    /* قسم الآراء */
    #reviews-section{
      margin-top:18px;
      background:#fff;
      border-radius:10px;
      padding:18px;
      box-shadow:0 6px 18px rgba(0,0,0,0.03);
    }
    #customer-reviews{ margin-bottom:18px; }

    .review-item{
      background:var(--card);
      padding:12px;
      border-radius:8px;
      margin-bottom:10px;
      border-left:4px solid var(--primary1);
      white-space:pre-wrap;
    }
    .review-meta{
      font-size:13px;
      color:var(--muted);
      margin-bottom:8px;
    }

    /* نموذج الإضافة */
    #add-review textarea{
      width:100%;
      min-height:90px;
      padding:10px;
      border-radius:8px;
      border:1px solid #ddd;
      resize:vertical;
      font-size:14px;
    }
    #submit-review{
      margin-top:8px;
      padding:10px 16px;
      background:var(--primary1);
      color:#fff;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
    }
    #submit-review:active{ transform:translateY(1px); }

    /* ملاحظات */
    .hint{ font-size:13px;color:var(--muted); margin-top:10px; }
    .small{ font-size:13px;color:var(--muted); }
  </style>
</head>
<body>
  <div class="container">
    <h1>مرحبا بكم في صفحة آراء العملاء</h1>

    <div class="top-actions">
      <!-- زر اطلب الخدمة (تجريبي) -->
      <button class="order-now-btn" onclick="alert('مثال: نقل المستخدم إلى صفحة الطلب')">اطلب الخدمة الآن</button>

      <!-- زر آراء العملاء يوجه إلى قسم الآراء -->
      <a href="#reviews-section" class="fun-feedback-btn" id="open-reviews-btn" title="اطلع على آراء العملاء أو أضف رأيك">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="white" aria-hidden="true">
          <path d="M21 6h-18c-1.1 0-2 .9-2 2v12l4-4h16c1.1 0 2-.9 2-2v-6c0-1.1-.9-2-2-2zm0 8h-16.17l-2.83 2.83v-10.83h19v8z"/>
        </svg>
        آراء العملاء
      </a>
    </div>

    <!-- قسم الآراء -->
    <section id="reviews-section" aria-labelledby="reviews-heading">
      <h2 id="reviews-heading">آراء العملاء</h2>

      <!-- هنا تُعرض الآراء -->
      <div id="customer-reviews" aria-live="polite"></div>

      <!-- نموذج إضافة رأي -->
      <div id="add-review" style="margin-top:12px;">
        <h3>شاركنا رأيك</h3>
        <textarea id="review-text" placeholder="اكتب رأيك هنا..."></textarea><br>
        <button id="submit-review">إرسال رأيك</button>
        <div class="hint">آراؤكم تحفظ محليًا على متصفحكم (للاختبار). سأريك لاحقًا كيف تحفظها على موقعك لو حبيت.</div>
      </div>
    </section>

    <p class="small" style="margin-top:18px;">ملاحظة: هذا ملف تجريبي يعمل محليًا. لتحويله إلى صفحة على موقعك، ارفع الملف أو انسخ الكود إلى لوحة التحكم في موقعك.</p>
  </div>

  <script>
    // مفاتيح التخزين
    const STORAGE_KEY = 'customer_reviews_v1';

    // تحميل الآراء من localStorage أو استخدام آراء افتراضية
    function loadReviews() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (raw) return JSON.parse(raw);
      } catch(e){ /* ignore */ }
      // آراء افتراضية أولية
      return [
        { text: "الخدمة كانت ممتازة وسريعة!", date: "2025-10-05" },
        { text: "فريق العمل متعاون جداً.", date: "2025-10-04" }
      ];
    }

    function saveReviews(arr) {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
      } catch(e){ console.warn('تعذّر الحفظ محليًا', e); }
    }

    // عرض الآراء في الصفحة
    function displayReviews() {
      const container = document.getElementById('customer-reviews');
      container.innerHTML = '';
      const reviews = loadReviews();
      if (reviews.length === 0) {
        container.innerHTML = '<p class="small">لا توجد آراء بعد — كن أول من يشارك رأيه!</p>';
        return;
      }
      reviews.slice().reverse().forEach(r => { // الأحدث أولًا
        const item = document.createElement('div');
        item.className = 'review-item';
        const meta = document.createElement('div');
        meta.className = 'review-meta';
        meta.textContent = r.date ? `تاريخ: ${r.date}` : '';
        const body = document.createElement('div');
        body.textContent = r.text;
        item.appendChild(meta);
        item.appendChild(body);
        container.appendChild(item);
      });
    }

    // إضافة حدث زر الإرسال
    document.getElementById('submit-review').addEventListener('click', () => {
      const ta = document.getElementById('review-text');
      const text = ta.value.trim();
      if (!text) {
        alert('الرجاء كتابة رأيك قبل الإرسال.');
        ta.focus();
        return;
      }
      const reviews = loadReviews();
      const now = new Date();
      const yyyy = now.getFullYear();
      const mm = String(now.getMonth()+1).padStart(2,'0');
      const dd = String(now.getDate()).padStart(2,'0');
      reviews.push({ text, date: `${yyyy}-${mm}-${dd}` });
      saveReviews(reviews);
      ta.value = '';
      displayReviews();
      // انتقل لعرض التعليق المضاف (اختياري)
      document.getElementById('customer-reviews').scrollIntoView({behavior:'smooth'});
    });

    // عند التحميل الأولي
    displayReviews();

    // اختياري: لو حبّت تربط "اطلب الخدمة الآن" بحيث يظهر الزر آراء بعد طلب الخدمة،
    // تقدر تضيف كود هنا لفتح قسم الآراء تلقائيًا بعد عملية الطلب.
  </script>
</body>
</html>
